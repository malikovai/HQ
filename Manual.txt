üìò –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ASE Digital HQ
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: /opt/digital-hq –°—Ç–µ–∫: Node.js (Backend), Nginx (Frontend), PostgreSQL (Database), Docker Compose.

üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏)
src/ ‚Äî –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±—ç–∫–µ–Ω–¥–∞ (TypeScript).

src/server.ts ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –≤—Å–µ API –º–∞—Ä—à—Ä—É—Ç—ã.

src/prisma/schema.prisma ‚Äî –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

public/ ‚Äî –§—Ä–æ–Ω—Ç–µ–Ω–¥ (HTML, CSS, JS).

index.html ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

login.html ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞.

nginx/ ‚Äî –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.

docker-compose.yml ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

.env ‚Äî –ü–∞—Ä–æ–ª–∏ –∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏.

üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º
1. –ó–∞–ø—É—Å–∫ –∏ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
–ï—Å–ª–∏ –≤—ã –≤–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã.

–û–±—ã—á–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ —Ç–æ–ª—å–∫–æ HTML/JS –≤ public/):

Bash

# –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ HTML –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
# –ï—Å–ª–∏ Nginx –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–ª, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ:
sudo docker compose restart web
–ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ë—ç–∫–µ–Ω–¥–∞ (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ src/*.ts –∏–ª–∏ .env):

Bash

# –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç TypeScript –≤ JavaScript
sudo docker compose up -d --build
–ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:

Bash

sudo docker compose down
2. –†–∞–±–æ—Ç–∞ —Å –ë–∞–∑–æ–π –î–∞–Ω–Ω—ã—Ö
–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ SQL:

Bash

sudo docker exec -it digital-hq-db psql -U postgres -d digital_hq
(–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏: \dt - —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü, SELECT * FROM "User"; - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π).

–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î (Prisma): –ï—Å–ª–∏ –≤—ã –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª–∏ src/prisma/schema.prisma:

Bash

# 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫ –±–∞–∑–µ
sudo docker exec -it digital-hq-api npx prisma db push

# 2. –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç (—á—Ç–æ–±—ã VS Code –≤–∏–¥–µ–ª –Ω–æ–≤—ã–µ –ø–æ–ª—è)
sudo docker exec -it digital-hq-api npx prisma generate
–ë—ç–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

Bash

sudo docker exec -t digital-hq-db pg_dump -U postgres -d digital_hq > backup_$(date +%F).sql
3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏.

–õ–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ (–æ—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞, API):

Bash

sudo docker logs -f digital-hq-api
–õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

Bash

sudo docker logs -f digital-hq-db
üõ† –¢—Ä–∞–±–ª—à—É—Ç–∏–Ω–≥ (–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫)
–ü—Ä–æ–±–ª–µ–º–∞ 1: "–ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏" / "Invalid login or password"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –≤–µ—Ä–Ω—ã–π email.

–ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –µ–≥–æ –º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å —á–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –ø—Ä–æ—â–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL –¥–ª—è —Å–º–µ–Ω—ã —Ö—ç—à–∞ –ø–∞—Ä–æ–ª—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä bcrypt).

–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ (sudo docker logs digital-hq-api) –≤ –º–æ–º–µ–Ω—Ç –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞. –ï—Å–ª–∏ —Ç–∞–º –æ—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –ø. 3.

–ü—Ä–æ–±–ª–µ–º–∞ 2: "–°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è" (Connection refused)
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω—ã –ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:

Bash

sudo docker compose ps
–î–æ–ª–∂–Ω–æ –±—ã—Ç—å 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º Up.

–ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä hq-web (Nginx) —É–ø–∞–ª, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –µ–≥–æ –ª–æ–≥–∏:

Bash

sudo docker logs hq-web
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –∑–∞–Ω—è—Ç –ª–∏ –ø–æ—Ä—Ç 80 –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (Apache, –¥—Ä—É–≥–æ–π Nginx).

–ü—Ä–æ–±–ª–µ–º–∞ 3: "–ù–µ—Ç –∏–∫–æ–Ω–∫–∏ –∫–æ—Ä–∑–∏–Ω—ã —É –º–æ–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π"
–ü—Ä–∏—á–∏–Ω–∞: –ë—Ä–∞—É–∑–µ—Ä –∑–∞–ø–æ–º–Ω–∏–ª —Å—Ç–∞—Ä—É—é —Å–µ—Å—Å–∏—é –±–µ–∑ –≤–∞—à–µ–≥–æ ID.

–†–µ—à–µ–Ω–∏–µ: –ù–∞–∂–º–∏—Ç–µ "–í—ã—Ö–æ–¥", –∑–∞—Ç–µ–º Ctrl+F5, –∑–∞—Ç–µ–º –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞.

–ü—Ä–æ–±–ª–µ–º–∞ 4: "Prisma Client error / Database error" –≤ –ª–æ–≥–∞—Ö
–ß–∞—Å—Ç–æ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º—ã –ë–î –±–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏.

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:

Bash

sudo docker exec -it digital-hq-api npx prisma db push
sudo docker restart digital-hq-api
–ü—Ä–æ–±–ª–µ–º–∞ 5: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ src –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è
–í—ã –∏–∑–º–µ–Ω–∏–ª–∏ —Ñ–∞–π–ª .ts, –Ω–æ —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏.

TS –Ω—É–∂–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å. –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (restart) –Ω–µ –ø–æ–º–æ–∂–µ—Ç.

–†–µ—à–µ–Ω–∏–µ:

Bash

sudo docker compose up -d --build
üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ–∏—á—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É "–¢–µ–ª–µ—Ñ–æ–Ω" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):

–ò–∑–º–µ–Ω–∏—Ç–µ src/prisma/schema.prisma (–¥–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ).

–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è: sudo docker exec -it digital-hq-api npx prisma db push.

–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ –≤ API: src/server.ts (–≤ –º–∞—Ä—à—Ä—É—Ç—ã POST /users –∏ GET /users).

–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–µ –≤ HTML: public/index.html (–≤ —Ñ–æ—Ä–º—É —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ç–∞–±–ª–∏—Ü—É).

–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: sudo docker compose up -d --build.

–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
